<!--  This Source Code Form is subject to the terms of the MIT license
      If a copy of the MIT license was not distributed with this file, you can
      obtain one at http://www.mozillapopcorn.org/butter-license.txt -->

<html>
  <head>
    <script type="text/javascript" src="../src/dialog/dialog-comm.js"></script>
    <script type="text/javascript">
      (function(){
        var _comm = new Comm();

        document.addEventListener( "DOMContentLoaded", function( e ){
          var okButton = document.getElementById( "yes" ),
              url = document.getElementById( "url" );

          function okPressed( e ){
            _comm.send( "cancel" );
          }

          document.addEventListener( "keypress", function( e ) {
            if( e.keyCode === 13 ) {
              okPressed( e );
            } else if( e.keyCode === 27 ) {
              okPressed( e );
            }
          }, false);

          _comm.listen( "url", function( e ){
            url.innerHTML = e.data;
            url.href = e.data;
            okButton.removeAttribute( "disabled" );
          });

          okButton.addEventListener( "click", okPressed, false );
        }, false );
      }());
    </script>
    <link rel="stylesheet" href="dialog.css" />
    <style>
      h1{
        width: 100%;
        text-align: center;
      }
      #better {
        display: none;
        color: #fb1121;
      }
      #url {
        width: 100%;
        text-align: center;
      }
    </style>
  </head>
  <body>
    <div id="container" class="hbox center">
      <div class="vbox center">
        <h1>Share URL:</h1>
        <div><a target="_blank" href="#" id="url"></a></div>
        <div id="buttons" class="hbox center">
          <button disabled id="yes">Ok</button>
        </div>
      </div>
    </div>
  </body>
</html>
